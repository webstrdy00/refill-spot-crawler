# ðŸ½ï¸ Refill Spot Crawler (3ë‹¨ê³„ ë°ì´í„° í’ˆì§ˆ ê³ ë„í™” ë²„ì „)

ë‹¤ì´ë‹ì½”ë“œì—ì„œ ë¬´í•œë¦¬í•„ ê°€ê²Œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  **ë°ì´í„° í’ˆì§ˆì„ ìžë™ìœ¼ë¡œ í–¥ìƒì‹œí‚¤ëŠ”** ê³ ë„í™”ëœ í¬ë¡¤ë§ ì‹œìŠ¤í…œìž…ë‹ˆë‹¤.

## ðŸŽ¯ 3ë‹¨ê³„ í•µì‹¬ ëª©í‘œ ë‹¬ì„±

### ðŸ“ ì¢Œí‘œ ì™„ì„±ë„: 90% â†’ 98%+

- **ì§€ì˜¤ì½”ë”© API ì—°ë™**: ì¹´ì¹´ì˜¤ APIë¡œ ì¢Œí‘œ ì—†ëŠ” ê°€ê²Œ í•´ê²°
- **ì£¼ì†Œ ì •ê·œí™”**: ë¶ˆì™„ì „í•œ ì£¼ì†Œ ìžë™ ë³´ì™„
- **ì¢Œí‘œ ê²€ì¦**: í•œêµ­ ì˜ì—­ ë‚´ ìœ íš¨ì„± ê²€ì¦
- **ê·¼ì²˜ ê°€ê²Œ ê¸°ë°˜ ì¶”ì •**: API ì‹¤íŒ¨ ì‹œ ì£¼ë³€ ê°€ê²Œ ì¢Œí‘œ í™œìš©

### ðŸ’° ê°€ê²© ì •ë³´ ì •ê·œí™”: 30% â†’ 80%+

- **í•œêµ­ì–´ ìˆ«ìž ë³€í™˜**: "1ë§Œ5ì²œì›" â†’ 15000
- **ê°€ê²© ë²”ìœ„ ì²˜ë¦¬**: "1ë§Œì›~2ë§Œì›" â†’ min: 10000, max: 20000
- **ì‹œê°„ëŒ€ë³„ ê°€ê²©**: "ëŸ°ì¹˜ 8ì²œì›, ë””ë„ˆ 1ë§Œ2ì²œì›" â†’ êµ¬ì¡°í™”ëœ JSON
- **ì¡°ê±´ë¶€ ê°€ê²©**: "2ì¸ ì´ìƒ 12000ì›" â†’ ì¡°ê±´ ë¶„ë¦¬

### ðŸ·ï¸ ì¹´í…Œê³ ë¦¬ í‘œì¤€í™”: 0% â†’ 100%

- **í‘œì¤€ ë¶„ë¥˜ì²´ê³„**: ì›ë³¸ íƒœê·¸ â†’ ê³„ì¸µì  í‘œì¤€ ì¹´í…Œê³ ë¦¬
- **ìžë™ ë§¤í•‘**: "#ì‚¼ê²¹ì‚´ë¬´í•œë¦¬í•„" â†’ ["í•œì‹", "ê³ ê¸°", "ë¼ì§€ê³ ê¸°", "êµ¬ì´", "ë¬´í•œë¦¬í•„"]
- **ë™ì˜ì–´ ì²˜ë¦¬**: "ì¼ì‹" = ["ìŠ¤ì‹œ", "ì‚¬ì‹œë¯¸", "ëˆê¹ŒìŠ¤"]
- **ë¶ˆí•„ìš” íƒœê·¸ ì œê±°**: ì§€ì—­ëª…, ê´‘ê³ ì„± íƒœê·¸ ìžë™ í•„í„°ë§

### ðŸ”„ ì¤‘ë³µ ì œê±°: ìˆ˜ë™ â†’ 95% ìžë™í™”

- **ì´ë¦„ ìœ ì‚¬ë„ ë§¤ì¹­**: Fuzzy String Matchingìœ¼ë¡œ ìœ ì‚¬ ê°€ê²Œ ê°ì§€
- **ìœ„ì¹˜ ê¸°ë°˜ ê²€ì¦**: 200m ì´ë‚´ + ì´ë¦„ ìœ ì‚¬ë„ë¡œ ì¤‘ë³µ íŒë‹¨
- **ì „í™”ë²ˆí˜¸ ë§¤ì¹­**: ë™ì¼ ì „í™”ë²ˆí˜¸ ê°€ê²Œ ìžë™ í†µí•©
- **ì •ë³´ í†µí•©**: ê°€ìž¥ ì™„ì„±ë„ ë†’ì€ ë°ì´í„°ë¡œ ìžë™ ë³‘í•©

## ðŸš€ ë¹ ë¥¸ ì‹œìž‘

### 1. í™˜ê²½ ì„¤ì •

```bash
# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™” (Windows)
python -m venv venv
venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (Docker ì‚¬ìš©)
docker-compose up -d
```

### 2. API í‚¤ ì„¤ì • (ì„ íƒì‚¬í•­)

ì§€ì˜¤ì½”ë”© ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì¹´ì¹´ì˜¤ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```bash
# .env íŒŒì¼ ìƒì„±
KAKAO_API_KEY=your_kakao_rest_api_key
```

**API í‚¤ ì—†ì´ë„ ê°€ê²© ì •ê·œí™”, ì¹´í…Œê³ ë¦¬ ë§¤í•‘, ì¤‘ë³µ ì œê±°ëŠ” ì •ìƒ ë™ìž‘í•©ë‹ˆë‹¤.**

### 3. ì‹¤í–‰ ë°©ë²•

#### 3ë‹¨ê³„ ê³ ë„í™” í¬ë¡¤ë§ (ê¸°ë³¸)

```bash
python main.py
# ë˜ëŠ”
python main.py stage3
```

#### 3ë‹¨ê³„ ê³ ë„í™” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

```bash
python main.py test-stage3
```

#### ê¸°ì¡´ ê°•í™”ëœ í¬ë¡¤ë§

```bash
python main.py enhanced
```

#### ëª¨ë“  ì§€ì—­ í¬ë¡¤ë§

```bash
python main.py regions
```

#### ë°ì´í„°ë² ì´ìŠ¤ í†µê³„ ì¡°íšŒ

```bash
python main.py stats
```

#### ì„¤ì • ì •ë³´ í™•ì¸

```bash
python main.py config
```

## ðŸŽ¯ 3ë‹¨ê³„ ê³ ë„í™” ê¸°ëŠ¥ ìƒì„¸

### ðŸ“ ì§€ì˜¤ì½”ë”© ë° ì¢Œí‘œ ê²€ì¦

- **ì§€ì˜¤ì½”ë”© API ì—°ë™**: ì¹´ì¹´ì˜¤ APIë¡œ ì¢Œí‘œ ì—†ëŠ” ê°€ê²Œ í•´ê²°
- **ì£¼ì†Œ ì •ê·œí™”**: ë¶ˆì™„ì „í•œ ì£¼ì†Œ ìžë™ ë³´ì™„
- **ì¢Œí‘œ ê²€ì¦**: í•œêµ­ ì˜ì—­ ë‚´ ìœ íš¨ì„± ê²€ì¦
- **ê·¼ì²˜ ê°€ê²Œ ê¸°ë°˜ ì¶”ì •**: API ì‹¤íŒ¨ ì‹œ ì£¼ë³€ ê°€ê²Œ ì¢Œí‘œ í™œìš©

### ðŸ’° ê°€ê²© ì •ë³´ ì •ê·œí™”

```python
# ì •ê·œí™” ê²°ê³¼ ì˜ˆì‹œ
{
    "price_type": "time_based",
    "min_price": 8000,
    "max_price": 12000,
    "time_based": {
        "lunch": {"min": 8000, "max": 8000},
        "dinner": {"min": 12000, "max": 12000}
    },
    "confidence": 0.85
}
```

### ðŸ·ï¸ ì¹´í…Œê³ ë¦¬ ë§¤í•‘

```python
# ë§¤í•‘ ê²°ê³¼ ì˜ˆì‹œ
ì›ë³¸: ["#ì‚¼ê²¹ì‚´ë¬´í•œë¦¬í•„", "#ê³ ê¸°", "#ê°•ë‚¨ë§›ì§‘"]
í‘œì¤€: ["ë¬´í•œë¦¬í•„", "í•œì‹", "ê³ ê¸°", "ë¼ì§€ê³ ê¸°", "êµ¬ì´"]
```

### ðŸ”„ ì¤‘ë³µ ì œê±°

```python
# ì¤‘ë³µ íŒë‹¨ ê¸°ì¤€
- ì´ë¦„ ìœ ì‚¬ë„ > 85% + ê±°ë¦¬ < 200m
- ì „í™”ë²ˆí˜¸ ì¼ì¹˜
- ì´ë¦„ ìœ ì‚¬ë„ > 90% + ê±°ë¦¬ < 50m
```

## ðŸ“Š 3ë‹¨ê³„ ê°•í™”ëœ ë°ì´í„° ìŠ¤í‚¤ë§ˆ

### ì§€ì˜¤ì½”ë”© ì •ë³´ (ì‹ ê·œ)

- `geocoding_source`: ì§€ì˜¤ì½”ë”© ì†ŒìŠ¤ (kakao/naver/estimated)
- `geocoding_confidence`: ì§€ì˜¤ì½”ë”© ì‹ ë¢°ë„

### ì •ê·œí™”ëœ ê°€ê²© ì •ë³´ (ì‹ ê·œ)

```json
{
  "normalized_price": {
    "price_type": "range|single|time_based|conditional",
    "min_price": 10000,
    "max_price": 15000,
    "time_based": {
      "lunch": { "min": 8000, "max": 8000 },
      "dinner": { "min": 12000, "max": 12000 }
    },
    "conditions": "2ì¸ ì´ìƒ",
    "confidence": 0.9
  }
}
```

### í‘œì¤€ ì¹´í…Œê³ ë¦¬ (ì‹ ê·œ)

- `standard_categories`: í‘œì¤€í™”ëœ ì¹´í…Œê³ ë¦¬ ë°°ì—´

## ðŸ“ˆ 3ë‹¨ê³„ ì„±ê³¼ ì§€í‘œ

### ë°ì´í„° í’ˆì§ˆ í–¥ìƒ

- **ì¢Œí‘œ ì™„ì„±ë„**: 90% â†’ 98%+ â¬†ï¸ (+8%)
- **ê°€ê²© ì •ë³´ í™œìš©**: 30% â†’ 80%+ â¬†ï¸ (+50%)
- **ì¹´í…Œê³ ë¦¬ í‘œì¤€í™”**: 0% â†’ 100% â¬†ï¸ (+100%)
- **ì¤‘ë³µ ì œê±°**: ìˆ˜ë™ â†’ 95% ìžë™í™” â¬†ï¸ (+95%)

### ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ê°€ëŠ¥

âœ… "ì§€ê¸ˆ ì˜ì—…ì¤‘ì¸ ê°€ê²Œë§Œ ë³´ê¸°" (ì˜ì—…ì‹œê°„ íŒŒì‹±)
âœ… "2ë§Œì› ì´í•˜ ê°€ê²Œ í•„í„°" (ê°€ê²© ì •ê·œí™”)
âœ… "ê³ ê¸° ë¬´í•œë¦¬í•„ë§Œ ë³´ê¸°" (ì¹´í…Œê³ ë¦¬ í‘œì¤€í™”)
âœ… "ë‚´ ìœ„ì¹˜ ì£¼ë³€ 1km" (ì¢Œí‘œ ì™„ì„±ë„ 98%)

## ðŸ”§ 3ë‹¨ê³„ ì„¤ì •

### ì§€ì˜¤ì½”ë”© ì„¤ì •

```python
# config.py
KAKAO_API_KEY = "your_kakao_rest_api_key"
```

### ê°€ê²© ì •ê·œí™” ì„¤ì •

```python
# í•œêµ­ì–´ ìˆ«ìž íŒ¨í„´
"1ë§Œì›" â†’ 10000
"1ë§Œ2ì²œì›" â†’ 12000
"2ë§Œì›ëŒ€" â†’ min: 20000, max: 29999
```

### ì¹´í…Œê³ ë¦¬ ë§¤í•‘ ì„¤ì •

```python
# í‘œì¤€ ì¹´í…Œê³ ë¦¬ ê³„ì¸µ
CATEGORY_HIERARCHY = {
    "ì‹ì‚¬_íƒ€ìž…": ["ë¬´í•œë¦¬í•„", "ë·”íŽ˜", "ë‹¨í’ˆ"],
    "ìŒì‹_ì¢…ë¥˜": ["í•œì‹", "ì¤‘ì‹", "ì¼ì‹", "ì–‘ì‹"],
    "ì£¼ìš”_ìž¬ë£Œ": ["ê³ ê¸°", "í•´ì‚°ë¬¼", "ì±„ì†Œ"],
    "ê³ ê¸°_ì„¸ë¶€": ["ì†Œê³ ê¸°", "ë¼ì§€ê³ ê¸°", "ë‹­ê³ ê¸°"],
    "ì¡°ë¦¬_ë°©ë²•": ["êµ¬ì´", "ì°œ", "íƒ•", "ë³¶ìŒ"],
    "ë¶„ìœ„ê¸°": ["ê°€ì¡±", "íšŒì‹", "ë°ì´íŠ¸", "í˜¼ë°¥"]
}
```

## ðŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° í†µê³„

### 3ë‹¨ê³„ ê°•í™” í†µê³„

- ì§€ì˜¤ì½”ë”© ì„±ê³µë¥  (ì¹´ì¹´ì˜¤/ë„¤ì´ë²„ APIë³„)
- ê°€ê²© ì •ê·œí™” ì„±ê³µë¥  (íƒ€ìž…ë³„)
- ì¹´í…Œê³ ë¦¬ ë§¤í•‘ ì„±ê³µë¥ 
- ì¤‘ë³µ ì œê±° í†µê³„

### ì‹¤ì‹œê°„ ì§„í–‰ìƒí™©

- í‚¤ì›Œë“œë³„ ì§„í–‰ë¥ 
- ë°ì´í„° ê°•í™” ì§„í–‰ë¥ 
- ì˜ˆìƒ ì™„ë£Œ ì‹œê°„
- ì„±ê³µ/ì‹¤íŒ¨ í†µê³„

## ðŸ—ºï¸ ì§€ì› ì§€ì—­

### ì„œìš¸ ì£¼ìš” ì§€ì—­ (12ê°œ)

1. **ê°•ë‚¨**: ê°•ë‚¨êµ¬ ì „ì²´
2. **í™ëŒ€**: í™ìµëŒ€í•™êµ ì£¼ë³€
3. **ê°•ì„œ**: ê¹€í¬ê³µí•­ ì£¼ë³€
4. **ì†¡íŒŒ**: ìž ì‹¤, ë¡¯ë°ì›”ë“œ ì£¼ë³€
5. **ê°•ë™**: ì²œí˜¸ë™ ì£¼ë³€
6. **ì„œì´ˆ**: êµëŒ€, ì‚¬ë‹¹ ì£¼ë³€
7. **ì˜ë“±í¬**: ì—¬ì˜ë„, íƒ€ìž„ìŠ¤í€˜ì–´ ì£¼ë³€
8. **ë§ˆí¬**: í•©ì •, ìƒì•” ì£¼ë³€
9. **ìš©ì‚°**: ì´íƒœì›, í•œë‚¨ ì£¼ë³€
10. **ì„±ë™**: ì™•ì‹­ë¦¬, ì„±ìˆ˜ ì£¼ë³€
11. **ê´‘ì§„**: ê±´ëŒ€ ì£¼ë³€
12. **ê°•ë¶**: ê°•ë¶êµ¬ ì „ì²´

### ìžë™ í™•ìž¥ ì§€ì—­ (16ê°œ)

ì¢…ë¡œ, ì¤‘êµ¬, ë™ëŒ€ë¬¸, ì¤‘ëž‘, ì„±ë¶, ë„ë´‰, ë…¸ì›, ì€í‰, ì„œëŒ€ë¬¸, ì–‘ì²œ, êµ¬ë¡œ, ê¸ˆì²œ, ê´€ì•…, ë™ìž‘ ë“±

## ðŸ” ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥

### ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰

```sql
-- íŠ¹ì • ìœ„ì¹˜ì—ì„œ 5km ë‚´ ë¬´í•œë¦¬í•„ ê°€ê²Œ ê²€ìƒ‰
SELECT * FROM find_nearby_stores(37.5665, 126.9780, 5);
```

### ë¬´í•œë¦¬í•„ í™•ì • ê°€ê²Œ ì¡°íšŒ

```sql
-- ë¬´í•œë¦¬í•„ì´ í™•ì •ëœ ê°€ê²Œë§Œ ì¡°íšŒ
SELECT * FROM confirmed_refill_stores;
```

### ì§€ì—­ë³„ í†µê³„ ì¡°íšŒ

```sql
-- ì§€ì—­ë³„ ê°€ê²Œ ë¶„í¬ í†µê³„
SELECT * FROM regional_stats;
```

## ðŸ“ ë¡œê·¸ íŒŒì¼

### ì£¼ìš” ë¡œê·¸ íŒŒì¼

- `refill_spot_crawler.log`: ë©”ì¸ í¬ë¡¤ë§ ë¡œê·¸
- `crawler.log`: ìƒì„¸ í¬ë¡¤ë§ ë¡œê·¸

### ë¡œê·¸ ë ˆë²¨

- **INFO**: ì¼ë°˜ ì§„í–‰ ìƒí™©
- **WARNING**: ì£¼ì˜ì‚¬í•­ (ë°ì´í„° í’ˆì§ˆ ì´ìŠˆ ë“±)
- **ERROR**: ì˜¤ë¥˜ ë°œìƒ (ìž¬ì‹œë„ ê°€ëŠ¥)
- **CRITICAL**: ì‹¬ê°í•œ ì˜¤ë¥˜ (ì¤‘ë‹¨ í•„ìš”)

## ðŸ› ï¸ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨

```bash
# Docker ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker-compose ps

# ì»¨í…Œì´ë„ˆ ìž¬ì‹œìž‘
docker-compose restart
```

#### 2. í¬ë¡¤ë§ ì†ë„ ëŠë¦¼

- `config.py`ì—ì„œ ì§€ì—° ì‹œê°„ ì¡°ì •
- ë°°ì¹˜ í¬ê¸° ì¦ê°€ (ë‹¨, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€)

#### 3. ë©”ëª¨ë¦¬ ë¶€ì¡±

- ë°°ì¹˜ í¬ê¸° ê°ì†Œ
- í‚¤ì›Œë“œë‹¹ ìµœëŒ€ ê°€ê²Œ ìˆ˜ ì œí•œ

#### 4. ë¬´í•œë¦¬í•„ ê´€ë ¨ì„± ë‚®ìŒ

- `VALIDATION_CONFIG`ì—ì„œ í‚¤ì›Œë“œ ì¶”ê°€
- ê²€ì¦ ë¡œì§ ê°•í™”

### ì„±ëŠ¥ ìµœì í™”

#### í¬ë¡¤ë§ ì†ë„ í–¥ìƒ

```python
# config.py ìˆ˜ì •
CRAWLING_CONFIG = {
    "batch_size": 10,  # ì¦ê°€
    "delay_between_stores": 0.5,  # ê°ì†Œ
    "delay_between_batches": 2,  # ê°ì†Œ
}
```

#### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

```python
CRAWLING_CONFIG = {
    "batch_size": 3,  # ê°ì†Œ
    "max_stores_per_keyword": 10,  # ì œí•œ
}
```

## ðŸ“Š ë°ì´í„° í’ˆì§ˆ ì§€í‘œ

### ìˆ˜ì§‘ í’ˆì§ˆ

- **ì™„ì„±ë„**: í•„ìˆ˜ í•„ë“œ ë³´ìœ ìœ¨
- **ì •í™•ë„**: ì¢Œí‘œ ìœ íš¨ì„±, ì „í™”ë²ˆí˜¸ í˜•ì‹
- **ê´€ë ¨ì„±**: ë¬´í•œë¦¬í•„ í‚¤ì›Œë“œ ë§¤ì¹­ë¥ 
- **ì‹ ì„ ë„**: ìµœê·¼ ì—…ë°ì´íŠ¸ ë¹„ìœ¨

### ê²€ì¦ ê¸°ì¤€

- ê°€ê²Œëª… 2ìž ì´ìƒ
- í•œêµ­ ë‚´ ì¢Œí‘œ ë²”ìœ„
- ë¬´í•œë¦¬í•„ ê´€ë ¨ í‚¤ì›Œë“œ í¬í•¨
- ì¤‘ë³µ ì œê±° (diningcode_place_id ê¸°ì¤€)

## ðŸ”„ ì—…ë°ì´íŠ¸ ê³„íš

### 3ë‹¨ê³„ ê³„íš (ì˜ˆì •)

- **ë‹¤ì¤‘ í”Œëž«í¼ ì§€ì›**: ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ë§µ ì—°ë™
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ë³€ê²½ì‚¬í•­ ìžë™ ê°ì§€
- **AI ê¸°ë°˜ ë¶„ë¥˜**: ìžë™ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
- **API ì„œë²„**: RESTful API ì œê³µ

## ðŸ“ž ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì œì•ˆì´ ìžˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.

### ë¡œê·¸ í™•ì¸ ë°©ë²•

```bash
# ìµœê·¼ ë¡œê·¸ í™•ì¸
tail -f refill_spot_crawler.log

# ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸
grep ERROR refill_spot_crawler.log
```

### í†µê³„ í™•ì¸

```bash
python main.py stats
```

---

**âš ï¸ ì£¼ì˜ì‚¬í•­**: ì´ ë„êµ¬ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”. ì›¹ì‚¬ì´íŠ¸ì˜ ì´ìš©ì•½ê´€ì„ ì¤€ìˆ˜í•˜ê³ , ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— ë¶€í•˜ë¥¼ ì£¼ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.
